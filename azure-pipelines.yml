trigger:
  branches:
    include:
      - main
      - feature/*
      - bugfix/*

pool:
  name: 'Default'

steps:
  - checkout: self  # âœ… Ensure repo is cloned

  - script: |
      cd frontend
      npm install
      npm run lint
      npm run test -- --watch=false --browsers=ChromeHeadless
    workingDirectory: $(Build.SourcesDirectory)/frontend
    displayName: 'Lint & Test Angular Frontend'

  - script: |
      cd frontend
      npm run build -- --configuration=production
    workingDirectory: $(Build.SourcesDirectory)/frontend
    displayName: 'Build Angular App'
